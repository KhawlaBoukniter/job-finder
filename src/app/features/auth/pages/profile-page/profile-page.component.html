<div class="max-w-7xl mx-auto py-6 sm:px-6 lg:px-8">
    <div class="px-4 py-6 sm:px-0">
        <div class="bg-white shadow overflow-hidden sm:rounded-lg">
            <div class="px-4 py-5 sm:px-6 flex justify-between items-center">
                <div>
                    <h3 class="text-lg leading-6 font-medium text-gray-900">Mon Profil</h3>
                    <p class="mt-1 max-w-2xl text-sm text-gray-500">Gérez vos informations personnelles.</p>
                </div>
                <button (click)="onDeleteAccount()"
                    class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500">
                    Supprimer mon compte
                </button>
            </div>

            <div class="border-t border-gray-200 px-4 py-5 sm:p-6">
                @if (successMessage()) {
                <div class="mb-4 bg-green-50 border-l-4 border-green-500 p-4">
                    <p class="text-sm text-green-700">{{ successMessage() }}</p>
                </div>
                }
                @if (errorMessage()) {
                <div class="mb-4 bg-red-50 border-l-4 border-red-500 p-4">
                    <p class="text-sm text-red-700">{{ errorMessage() }}</p>
                </div>
                }

                <form [formGroup]="profileForm" (ngSubmit)="onUpdate()">
                    <div class="grid grid-cols-6 gap-6">
                        <div class="col-span-6 sm:col-span-3">
                            <label for="firstName" class="block text-sm font-medium text-zinc-700">Prénom</label>
                            <input type="text" formControlName="firstName" id="firstName"
                                class="mt-1 focus:ring-purple-500 focus:border-purple-500 block w-full shadow-sm sm:text-sm border-zinc-300 rounded-md">
                        </div>

                        <div class="col-span-6 sm:col-span-3">
                            <label for="lastName" class="block text-sm font-medium text-zinc-700">Nom</label>
                            <input type="text" formControlName="lastName" id="lastName"
                                class="mt-1 focus:ring-purple-500 focus:border-purple-500 block w-full shadow-sm sm:text-sm border-zinc-300 rounded-md">
                        </div>

                        <div class="col-span-6 sm:col-span-4">
                            <label for="email" class="block text-sm font-medium text-gray-700">Adresse email</label>
                            <input type="email" formControlName="email" id="email"
                                class="mt-1 focus:ring-purple-500 focus:border-purple-500 block w-full shadow-sm sm:text-sm border-zinc-300 rounded-md">
                        </div>

                        <div class="col-span-6 sm:col-span-4">
                            <label for="password" class="block text-sm font-medium text-gray-700">
                                Nouveau mot de passe
                                <span class="text-xs text-gray-500 font-normal">(Laisser vide pour ne pas
                                    changer)</span>
                            </label>
                            <input type="password" formControlName="password" id="password"
                                class="mt-1 focus:ring-purple-500 focus:border-purple-500 block w-full shadow-sm sm:text-sm border-zinc-300 rounded-md">
                            @if (profileForm.get('password')?.touched &&
                            profileForm.get('password')?.hasError('minlength')) {
                            <p class="text-xs text-red-500 mt-1">Le mot de passe doit contenir au moins 6 caractères.
                            </p>
                            }
                        </div>
                    </div>

                    <div class="mt-6">
                        <button type="submit" [disabled]="profileForm.invalid || isLoading()"
                            class="inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50">
                            {{ isLoading() ? 'Enregistrement...' : 'Enregistrer les modifications' }}
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>